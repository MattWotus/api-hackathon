var populationText = [{
    "country": "Afghanistan",
    "population": 37172386
  },
  {
    "country": "Albania",
    "population": 2866376
  },
  {
    "country": "Algeria",
    "population": 42228429
  },
  {
    "country": "Andorra",
    "population": 77006
  },
  {
    "country": "Angola",
    "population": 30809762
  },
  {
    "country": "Antigua and Barbuda",
    "population": 96286
  },
  {
    "country": "Argentina",
    "population": 44494502
  },
  {
    "country": "Armenia",
    "population": 2951776
  },
  {
    "country": "Australia",
    "population": 24982688
  },
  {
    "country": "Austria",
    "population": 8840521
  },
  {
    "country": "Azerbaijan",
    "population": 9939800
  },
  {
    "country": "Bahamas",
    "population": 385640
  },
  {
    "country": "Bahrain",
    "population": 1569439
  },
  {
    "country": "Bangladesh",
    "population": 161356039
  },
  {
    "country": "Barbados",
    "population": 286641
  },
  {
    "country": "Belarus",
    "population": 9483499
  },
  {
    "country": "Belgium",
    "population": 11433256
  },
  {
    "country": "Belize",
    "population": 383071
  },
  {
    "country": "Benin",
    "population": 11485048
  },
  {
    "country": "Bhutan",
    "population": 754394
  },
  {
    "country": "Bolivia",
    "population": 11353142
  },
  {
    "country": "Bosnia and Herzegovina",
    "population": 3323929
  },
  {
    "country": "Botswana",
    "population": 2254126
  },
  {
    "country": "Brazil",
    "population": 209469333
  },
  {
    "country": "Brunei Darussalam",
    "population": 428962
  },
  {
    "country": "Bulgaria",
    "population": 7025037
  },
  {
    "country": "Burkina Faso",
    "population": 19751535
  },
  {
    "country": "Burundi",
    "population": 11175378
  },
  {
    "country": "Cambodia",
    "population": 16249798
  },
  {
    "country": "Cameroon",
    "population": 25216237
  },
  {
    "country": "Canada",
    "population": 37057765
  },
  {
    "country": "Cape Verde",
    "population": 543767
  },
  {
    "country": "Central African Republic",
    "population": 4666377
  },
  {
    "country": "Chad",
    "population": 15477751
  },
  {
    "country": "Chile",
    "population": 18729160
  },
  {
    "country": "China",
    "population": 1392730000
  },

  {
    "country": "Colombia",
    "population": 49648685
  },
  {
    "country": "Comoros",
    "population": 832322
  },
  {
    "country": "Congo (Brazzaville)",
    "population": 5244363
  },
  {
    "country": "Congo (Kinshasa)",
    "population": 84070000
  },
  {
    "country": "Costa Rica",
    "population": 4999441
  },
  {
    "country": "Croatia",
    "population": 4087843
  },
  {
    "country": "Cuba",
    "population": 11338138
  },
  {
    "country": "Cyprus",
    "population": 1189265
  },
  {
    "country": "Czech Republic",
    "population": 10629928
  },
  {
    "country": "CÃ´te d'Ivoire",
    "population": 25070000
  },
  {
    "country": "Denmark",
    "population": 5793636
  },
  {
    "country": "Djibouti",
    "population": 958920
  },
  {
    "country": "Dominica",
    "population": 71625
  },
  {
    "country": "Dominican Republic",
    "population": 10627165
  },
  {
    "country": "Ecuador",
    "population": 17084357
  },
  {
    "country": "Egypt",
    "population": 98423595
  },
  {
    "country": "El Salvador",
    "population": 6420744
  },
  {
    "country": "Equatorial Guinea",
    "population": 1308974
  },
  {
    "country": "Eritrea",
    "population": 3213972
  },
  {
    "country": "Estonia",
    "population": 1321977
  },
  {
    "country": "Ethiopia",
    "population": 109224559
  },
  {
    "country": "Fiji",
    "population": 883483
  },
  {
    "country": "Finland",
    "population": 5515525
  },
  {
    "country": "France",
    "population": 66977107
  },
  {
    "country": "Gabon",
    "population": 2119275
  },
  {
    "country": "Gambia",
    "population": 2280102
  },
  {
    "country": "Georgia",
    "population": 3726549
  },
  {
    "country": "Germany",
    "population": 82905782
  },
  {
    "country": "Ghana",
    "population": 29767108
  },
  {
    "country": "Greece",
    "population": 10731726
  },
  {
    "country": "Grenada",
    "population": 111454
  },
  {
    "country": "Guatemala",
    "population": 17247807
  },
  {
    "country": "Guinea",
    "population": 12414318
  },
  {
    "country": "Guinea-Bissau",
    "population": 1874309
  },
  {
    "country": "Guyana",
    "population": 779004
  },
  {
    "country": "Haiti",
    "population": 11123176
  },
  {
    "country": "Holy See (Vatican City State)",
    "population": 825
  },
  {
    "country": "Honduras",
    "population": 9587522
  },
  {
    "country": "Hungary",
    "population": 9775564
  },
  {
    "country": "Iceland",
    "population": 352721
  },
  {
    "country": "India",
    "population": 1352617328
  },
  {
    "country": "Indonesia",
    "population": 267663435
  },
  {
    "country": "Iran, Islamic Republic of",
    "population": 81800269
  },
  {
    "country": "Iraq",
    "population": 38433600
  },
  {
    "country": "Ireland",
    "population": 4867309
  },
  {
    "country": "Israel",
    "population": 8882800
  },
  {
    "country": "Italy",
    "population": 60421760
  },
  {
    "country": "Jamaica",
    "population": 2934855
  },
  {
    "country": "Japan",
    "population": 126529100
  },
  {
    "country": "Jordan",
    "population": 9956011
  },
  {
    "country": "Kazakhstan",
    "population": 18272430
  },
  {
    "country": "Kenya",
    "population": 51393010
  },
  {
    "country": "Korea (South)",
    "population": 51606633
  },
  {
    "country": "Kuwait",
    "population": 4137309
  },
  {
    "country": "Kyrgyzstan",
    "population": 6322800
  },
  {
    "country": "Lao PDR",
    "population": 7061507
  },
  {
    "country": "Latvia",
    "population": 1927174
  },
  {
    "country": "Lebanon",
    "population": 6848925
  },
  {
    "country": "Lesotho",
    "population": 2108132
  },
  {
    "country": "Liberia",
    "population": 4818977
  },
  {
    "country": "Libya",
    "population": 6678567
  },
  {
    "country": "Liechtenstein",
    "population": 37910
  },
  {
    "country": "Lithuania",
    "population": 2801543
  },
  {
    "country": "Luxembourg",
    "population": 607950
  },
  {
    "country": "Macedonia, Republic of",
    "population": 2084367
  },
  {
    "country": "Madagascar",
    "population": 26262368
  },
  {
    "country": "Malawi",
    "population": 18143315
  },
  {
    "country": "Malaysia",
    "population": 31528585
  },
  {
    "country": "Maldives",
    "population": 515696
  },
  {
    "country": "Mali",
    "population": 19077690
  },
  {
    "country": "Malta",
    "population": 484630
  },
  {
    "country": "Mauritania",
    "population": 4403319
  },
  {
    "country": "Mauritius",
    "population": 1265303
  },
  {
    "country": "Mexico",
    "population": 126190788
  },
  {
    "country": "Moldova",
    "population": 2706049
  },
  {
    "country": "Monaco",
    "population": 38682
  },
  {
    "country": "Mongolia",
    "population": 3170208
  },
  {
    "country": "Montenegro",
    "population": 631219
  },
  {
    "country": "Morocco",
    "population": 36029138
  },
  {
    "country": "Mozambique",
    "population": 29495962
  },
  {
    "country": "Myanmar",
    "population": 53708395
  },
  {
    "country": "Namibia",
    "population": 2448255
  },
  {
    "country": "Nepal",
    "population": 28087871
  },
  {
    "country": "Netherlands",
    "population": 17231624
  },
  {
    "country": "New Zealand",
    "population": 4841000
  },
  {
    "country": "Nicaragua",
    "population": 6465513
  },
  {
    "country": "Niger",
    "population": 22442948
  },
  {
    "country": "Nigeria",
    "population": 195874740
  },
  {
    "country": "Norway",
    "population": 5311916
  },
  {
    "country": "Oman",
    "population": 4829483
  },
  {
    "country": "Pakistan",
    "population": 212215030
  },
  {
    "country": "Palestinian Territory",
    "population": 4569087
  },
  {
    "country": "Panama",
    "population": 4176873
  },
  {
    "country": "Papua New Guinea",
    "population": 8606316
  },
  {
    "country": "Paraguay",
    "population": 6956071
  },
  {
    "country": "Peru",
    "population": 31989256
  },
  {
    "country": "Philippines",
    "population": 106651922
  },
  {
    "country": "Poland",
    "population": 37974750
  },
  {
    "country": "Portugal",
    "population": 10283822
  },
  {
    "country": "Qatar",
    "population": 2781677
  },
  {
    "country": "Republic of Kosovo",
    "population": 1845000
  },
  {
    "country": "Romania",
    "population": 19466145
  },
  {
    "country": "Russian Federation",
    "population": 144478050
  },
  {
    "country": "Rwanda",
    "population": 12301939
  },
  {
    "country": "Saint Kitts and Nevis",
    "population": 52441
  },
  {
    "country": "Saint Lucia",
    "population": 181889
  },
  {
    "country": "Saint Vincent and the Grenadines",
    "population": 110210
  },
  {
    "country": "San Marino",
    "population": 33785
  },
  {
    "country": "Sao Tome and Principe",
    "population": 211028
  },
  {
    "country": "Saudi Arabia",
    "population": 33699947
  },
  {
    "country": "Senegal",
    "population": 15854360
  },
  {
    "country": "Serbia",
    "population": 6982000
  },
  {
    "country": "Seychelles",
    "population": 96762
  },
  {
    "country": "Sierra Leone",
    "population": 7650154
  },
  {
    "country": "Singapore",
    "population": 5638676
  },
  {
    "country": "Slovakia",
    "population": 5446771
  },
  {
    "country": "Slovenia",
    "population": 2073894
  },
  {
    "country": "Somalia",
    "population": 15008154
  },
  {
    "country": "South Africa",
    "population": 57779622
  },
  {
    "country": "South Sudan",
    "population": 10975920
  },
  {
    "country": "Spain",
    "population": 46796540
  },
  {
    "country": "Sri Lanka",
    "population": 21670000
  },
  {
    "country": "Sudan",
    "population": 41801533
  },
  {
    "country": "Suriname",
    "population": 575991
  },
  {
    "country": "Swaziland",
    "population": 1136191
  },
  {
    "country": "Sweden",
    "population": 10175214
  },
  {
    "country": "Switzerland",
    "population": 8513227
  },
  {
    "country": "Syria Arab Republic (Syria)",
    "population": 16906283
  },
  {
    "country": "Taiwan, Republic of China",
    "population": 23780000
  },
  {
    "country": "Tajikistan",
    "population": 9100837
  },
  {
    "country": "Tanzania, United Republic of",
    "population": 56318348
  },
  {
    "country": "Thailand",
    "population": 69428524
  },
  {
    "country": "Timor-Leste",
    "population": 1268000
  },
  {
    "country": "Togo",
    "population": 7889094
  },
  {
    "country": "Trinidad and Tobago",
    "population": 1389858
  },
  {
    "country": "Tunisia",
    "population": 11565204
  },
  {
    "country": "Turkey",
    "population": 82319724
  },
  {
    "country": "Uganda",
    "population": 42723139
  },
  {
    "country": "Ukraine",
    "population": 44622516
  },
  {
    "country": "United Arab Emirates",
    "population": 9630959
  },
  {
    "country": "United Kingdom",
    "population": 66460344
  },
  {
    "country": "United States of America",
    "population": 326687501
  },
  {
    "country": "Uruguay",
    "population": 3449299
  },
  {
    "country": "Uzbekistan",
    "population": 32955400
  },
  {
    "country": "Venezuela (Bolivarian Republic",
    "population": 28870195
  },
  {
    "country": "Viet Nam",
    "population": 95540395
  },
  {
    "country": "Western Sahara",
    "population": 652271
  },
  {
    "country": "Yemen",
    "population": 28498687
  },
  {
    "country": "Zambia",
    "population": 17351822
  },
  {
    "country": "Zimbabwe",
    "population": 14439018
  }
];

var globalDeaths = document.getElementById("globalDeaths");

var dateContainer = document.getElementById("date");
var date = new Date();
var year = date.getFullYear();
var day = date.getDate();
var month = date.getMonth() + 1;

dateContainer.textContent = month + "/" + day + "/" + year;

function thousands_separators(num) {
  var num_parts = num.toString().split(".");
  num_parts[0] = num_parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  return num_parts.join(".");
};

$.ajax({
  url: "https://cors-anywhere.herokuapp.com/api.covid19api.com/summary",
  method: "GET",
  success: getCovidDataSuccess,
  error: getCovidDataError
});

function getCovidDataSuccess(data) {
  globalDeaths.textContent = thousands_separators(data["Global"]["TotalDeaths"]);
  var countryData = data["Countries"];
  var deathsArray = [];
  var countryArray = [];
  var populationArray = [];
  for (var i = 0; i < countryData.length; i++) {
    var totalDeaths = countryData[i]["TotalDeaths"];
    var country = countryData[i]["Country"];
    var population = populationText[i]["population"];
    deathsArray.push(totalDeaths);
    countryArray.push(country);
    populationArray.push(population);
  };
  var perCapitaArray = [];
  for (var i = 0; i < populationArray.length; i++) {
    var division = deathsArray[i] / populationArray[i];
    var multiplication = division * 1000000
    perCapitaArray.push(multiplication);
  };
  google.charts.load('current', {
    'packages': ['geochart'],
    'mapsApiKey': 'AIzaSyBgy8LzcrzHLkGU97C0EgbAMfJJSv89-BI'
  });
  google.charts.setOnLoadCallback(drawRegionsMap);

  function drawRegionsMap() {
    var data = google.visualization.arrayToDataTable([
      ['Country', 'Deaths Per Capita'],
      [countryArray[0], perCapitaArray[0]],
      [countryArray[1], perCapitaArray[1]],
      [countryArray[2], perCapitaArray[2]],
      [countryArray[3], perCapitaArray[3]],
      [countryArray[4], perCapitaArray[4]],
      [countryArray[5], perCapitaArray[5]],
      [countryArray[6], perCapitaArray[6]],
      [countryArray[7], perCapitaArray[7]],
      [countryArray[8], perCapitaArray[8]],
      [countryArray[9], perCapitaArray[9]],
      [countryArray[10], perCapitaArray[10]],
      [countryArray[11], perCapitaArray[11]],
      [countryArray[12], perCapitaArray[12]],
      [countryArray[13], perCapitaArray[13]],
      [countryArray[14], perCapitaArray[14]],
      [countryArray[15], perCapitaArray[15]],
      [countryArray[16], perCapitaArray[16]],
      [countryArray[17], perCapitaArray[17]],
      [countryArray[18], perCapitaArray[18]],
      [countryArray[19], perCapitaArray[19]],
      [countryArray[20], perCapitaArray[20]],
      [countryArray[21], perCapitaArray[21]],
      [countryArray[22], perCapitaArray[22]],
      [countryArray[23], perCapitaArray[23]],
      [countryArray[24], perCapitaArray[24]],
      [countryArray[25], perCapitaArray[25]],
      [countryArray[26], perCapitaArray[26]],
      [countryArray[27], perCapitaArray[27]],
      [countryArray[28], perCapitaArray[28]],
      [countryArray[29], perCapitaArray[29]],
      [countryArray[30], perCapitaArray[30]],
      [countryArray[31], perCapitaArray[31]],
      [countryArray[32], perCapitaArray[32]],
      [countryArray[33], perCapitaArray[33]],
      [countryArray[34], perCapitaArray[34]],
      [countryArray[35], perCapitaArray[35]],
      [countryArray[36], perCapitaArray[36]],
      [countryArray[37], perCapitaArray[37]],
      [countryArray[38], perCapitaArray[38]],
      [countryArray[39], perCapitaArray[39]],
      [countryArray[40], perCapitaArray[40]],
      [countryArray[41], perCapitaArray[41]],
      [countryArray[42], perCapitaArray[42]],
      [countryArray[43], perCapitaArray[43]],
      [countryArray[44], perCapitaArray[44]],
      [countryArray[45], perCapitaArray[45]],
      [countryArray[46], perCapitaArray[46]],
      [countryArray[47], perCapitaArray[47]],
      [countryArray[48], perCapitaArray[48]],
      [countryArray[49], perCapitaArray[49]],
      [countryArray[50], perCapitaArray[50]],
      [countryArray[51], perCapitaArray[51]],
      [countryArray[52], perCapitaArray[52]],
      [countryArray[53], perCapitaArray[53]],
      [countryArray[54], perCapitaArray[54]],
      [countryArray[55], perCapitaArray[55]],
      [countryArray[56], perCapitaArray[56]],
      [countryArray[57], perCapitaArray[57]],
      [countryArray[58], perCapitaArray[58]],
      [countryArray[59], perCapitaArray[59]],
      [countryArray[60], perCapitaArray[60]],
      [countryArray[61], perCapitaArray[61]],
      [countryArray[62], perCapitaArray[62]],
      [countryArray[63], perCapitaArray[63]],
      [countryArray[64], perCapitaArray[64]],
      [countryArray[65], perCapitaArray[65]],
      [countryArray[66], perCapitaArray[66]],
      [countryArray[67], perCapitaArray[67]],
      [countryArray[68], perCapitaArray[68]],
      [countryArray[69], perCapitaArray[69]],
      [countryArray[70], perCapitaArray[70]],
      [countryArray[71], perCapitaArray[71]],
      [countryArray[72], perCapitaArray[72]],
      [countryArray[73], perCapitaArray[73]],
      [countryArray[74], perCapitaArray[74]],
      [countryArray[75], perCapitaArray[75]],
      [countryArray[76], perCapitaArray[76]],
      [countryArray[77], perCapitaArray[77]],
      [countryArray[78], perCapitaArray[78]],
      [countryArray[79], perCapitaArray[79]],
      [countryArray[80], perCapitaArray[80]],
      [countryArray[81], perCapitaArray[81]],
      [countryArray[82], perCapitaArray[82]],
      [countryArray[83], perCapitaArray[83]],
      [countryArray[84], perCapitaArray[84]],
      [countryArray[85], perCapitaArray[85]],
      [countryArray[86], perCapitaArray[86]],
      [countryArray[87], perCapitaArray[87]],
      [countryArray[88], perCapitaArray[88]],
      [countryArray[89], perCapitaArray[89]],
      [countryArray[90], perCapitaArray[90]],
      [countryArray[91], perCapitaArray[91]],
      [countryArray[92], perCapitaArray[92]],
      [countryArray[93], perCapitaArray[93]],
      [countryArray[94], perCapitaArray[94]],
      [countryArray[95], perCapitaArray[95]],
      [countryArray[96], perCapitaArray[96]],
      [countryArray[97], perCapitaArray[97]],
      [countryArray[98], perCapitaArray[98]],
      [countryArray[99], perCapitaArray[99]],
      [countryArray[100], perCapitaArray[100]],
      [countryArray[101], perCapitaArray[101]],
      [countryArray[102], perCapitaArray[102]],
      [countryArray[103], perCapitaArray[103]],
      [countryArray[104], perCapitaArray[104]],
      [countryArray[105], perCapitaArray[105]],
      [countryArray[106], perCapitaArray[106]],
      [countryArray[107], perCapitaArray[107]],
      [countryArray[108], perCapitaArray[108]],
      [countryArray[109], perCapitaArray[109]],
      [countryArray[110], perCapitaArray[110]],
      [countryArray[111], perCapitaArray[111]],
      [countryArray[112], perCapitaArray[112]],
      [countryArray[113], perCapitaArray[113]],
      [countryArray[114], perCapitaArray[114]],
      [countryArray[115], perCapitaArray[115]],
      [countryArray[116], perCapitaArray[116]],
      [countryArray[117], perCapitaArray[117]],
      [countryArray[118], perCapitaArray[118]],
      [countryArray[119], perCapitaArray[119]],
      [countryArray[120], perCapitaArray[120]],
      [countryArray[121], perCapitaArray[121]],
      [countryArray[122], perCapitaArray[122]],
      [countryArray[123], perCapitaArray[123]],
      [countryArray[124], perCapitaArray[124]],
      [countryArray[125], perCapitaArray[125]],
      [countryArray[126], perCapitaArray[126]],
      [countryArray[127], perCapitaArray[127]],
      [countryArray[128], perCapitaArray[128]],
      [countryArray[129], perCapitaArray[129]],
      [countryArray[130], perCapitaArray[130]],
      [countryArray[131], perCapitaArray[131]],
      [countryArray[132], perCapitaArray[132]],
      [countryArray[133], perCapitaArray[133]],
      [countryArray[134], perCapitaArray[134]],
      [countryArray[135], perCapitaArray[135]],
      [countryArray[136], perCapitaArray[136]],
      [countryArray[137], perCapitaArray[137]],
      [countryArray[138], perCapitaArray[138]],
      [countryArray[139], perCapitaArray[139]],
      [countryArray[140], perCapitaArray[140]],
      [countryArray[141], perCapitaArray[141]],
      [countryArray[142], perCapitaArray[142]],
      [countryArray[143], perCapitaArray[143]],
      [countryArray[144], perCapitaArray[144]],
      [countryArray[145], perCapitaArray[145]],
      [countryArray[146], perCapitaArray[146]],
      [countryArray[147], perCapitaArray[147]],
      [countryArray[148], perCapitaArray[148]],
      [countryArray[149], perCapitaArray[149]],
      [countryArray[150], perCapitaArray[150]],
      [countryArray[151], perCapitaArray[151]],
      [countryArray[152], perCapitaArray[152]],
      [countryArray[153], perCapitaArray[153]],
      [countryArray[154], perCapitaArray[154]],
      [countryArray[155], perCapitaArray[155]],
      [countryArray[156], perCapitaArray[156]],
      [countryArray[157], perCapitaArray[157]],
      [countryArray[158], perCapitaArray[158]],
      [countryArray[159], perCapitaArray[159]],
      [countryArray[160], perCapitaArray[160]],
      [countryArray[161], perCapitaArray[161]],
      [countryArray[162], perCapitaArray[162]],
      [countryArray[163], perCapitaArray[163]],
      [countryArray[164], perCapitaArray[164]],
      [countryArray[165], perCapitaArray[165]],
      [countryArray[166], perCapitaArray[166]],
      [countryArray[167], perCapitaArray[167]],
      [countryArray[168], perCapitaArray[168]],
      [countryArray[169], perCapitaArray[169]],
      [countryArray[170], perCapitaArray[170]],
      [countryArray[171], perCapitaArray[171]],
      [countryArray[172], perCapitaArray[172]],
      [countryArray[173], perCapitaArray[173]],
      [countryArray[174], perCapitaArray[174]],
      [countryArray[175], perCapitaArray[175]],
      [countryArray[176], perCapitaArray[176]],
      [countryArray[177], perCapitaArray[177]],
      [countryArray[178], perCapitaArray[178]],
      [countryArray[179], perCapitaArray[179]],
      [countryArray[180], perCapitaArray[180]],
      [countryArray[181], perCapitaArray[181]],
      [countryArray[182], perCapitaArray[182]],
      [countryArray[183], perCapitaArray[183]],
      [countryArray[184], perCapitaArray[184]],
      [countryArray[185], perCapitaArray[185]],
      [
        ["Greenland"],
        [0]
      ],
      [
        ["Svalbard and Jan Mayen"],
        [0]
      ]
    ]);
    var options = {
      colorAxis: {
        colors: ['#48ba17', 'yellow', 'orange', '#db4639']
      },
    };
    var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
    chart.draw(data, options);
  };

}

function getCovidDataError(error) {
  console.error(error);
};
